cmake_minimum_required(VERSION 2.8.11)
project(okvis_loop_closing)  

# require Eigen
find_package( Eigen REQUIRED )
include_directories(${EIGEN_INCLUDE_DIR})

# require OpenCV
find_package( OpenCV COMPONENTS core highgui imgproc features2d REQUIRED )
include_directories(BEFORE ${OpenCV_INCLUDE_DIRS}) 

# build the library
add_library(${PROJECT_NAME} 
  src/KeyframeDatabase.cpp
  src/Keyframe.cpp
  include/okvis/KeyframeDatabase.hpp
  include/okvis/Keyframe.hpp
)

# TODO: What do I need to link this to?
# and link it                 
target_link_libraries(${PROJECT_NAME}
 	PUBLIC okvis_time
	PUBLIC okvis_util
	PUBLIC okvis_kinematics 
	PUBLIC okvis_cv 
	PUBLIC okvis_common
	PUBLIC okvis_ceres 
	PUBLIC okvis_frontend
	PRIVATE ${GLOG_LIBRARIES}
)

# installation if required
install(TARGETS ${PROJECT_NAME}
  EXPORT okvisTargets 
  ARCHIVE DESTINATION "${INSTALL_LIB_DIR}" COMPONENT lib
)
install(DIRECTORY include/ DESTINATION ${INSTALL_INCLUDE_DIR} COMPONENT dev FILES_MATCHING PATTERN "*.hpp")
